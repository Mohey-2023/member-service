package com.mohey.memberservice.service;import org.springframework.dao.DataIntegrityViolationException;import org.springframework.stereotype.Service;import com.mohey.memberservice.domain.Member;import com.mohey.memberservice.domain.MemberDevice;import com.mohey.memberservice.dto.device.DeviceRegisterReqDto;import com.mohey.memberservice.dto.device.DeviceRegisterRespDto;import com.mohey.memberservice.ex.CustomApiException;import com.mohey.memberservice.repository.MemberDeviceRepository;import com.mohey.memberservice.repository.MemberRepository;import lombok.RequiredArgsConstructor;@RequiredArgsConstructor@Servicepublic class MemberDeviceServiceImpl implements MemberDeviceService {	private final MemberDeviceRepository memberDeviceRepository;	private final MemberRepository memberRepository;	@Override	public DeviceRegisterRespDto registerDevice(DeviceRegisterReqDto deviceRegisterReqDto) {		try {			Member member = memberRepository.findByMemberUuid(deviceRegisterReqDto.getMemberUuid());			MemberDevice memberDevice = memberDeviceRepository.save(deviceRegisterReqDto.toMemberDeviceEntity(member));			return new DeviceRegisterRespDto(member);		} catch (DataIntegrityViolationException e) {			throw new CustomApiException("기기등록 실패");		}	}}